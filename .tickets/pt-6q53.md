---
id: pt-6q53
status: closed
deps: [pt-3nit]
links: []
created: 2026-02-06T13:07:53Z
type: task
priority: 2
assignee: legout
external-ref: plan-kb-management-cli
tags: [tf, backlog, plan, knowledge]
---
# Implement tf kb rebuild-index (--dry-run)

## Task
Implement `tf kb rebuild-index` to regenerate `index.json` from filesystem.

## Acceptance Criteria
- [ ] Scans `.tf/knowledge/topics/*` and produces canonical index entries.
- [ ] Stable ordering by topic id.
- [ ] `--dry-run` prints changes without writing.
- [ ] Default writes atomically.

## References
- Plan: plan-kb-management-cli



## Notes

**2026-02-06T13:39:27Z**

Implementation complete.

Implemented tf kb rebuild-index command with:
- Scans .tf/knowledge/topics/* and produces canonical index entries
- Stable ordering by topic ID
- --dry-run flag to preview changes without writing
- Atomic writes using existing atomic_write_index helper
- Preserves existing metadata (keywords, custom fields)
- Extracts titles from frontmatter or markdown headings
- JSON output support for programmatic use

Changes:
- tf_cli/kb_cli.py: Added cmd_rebuild_index(), _extract_title_from_frontmatter(), updated usage() and main()
- tests/test_kb_rebuild_index.py: 14 comprehensive tests

All 295 tests pass.
Commit: 2a8195f
